% https://github.com/vEnhance/dotfiles/blob/main/texmf/tex/latex/evan/evan.sty %
%                                                                              %
%                                                       |  \                   %
%      ______  __     __  ______  _______      _______ _| ▓▓_   __    __       %
%     /      \|  \   /  \|      \|       \    /       \   ▓▓ \ |  \  |  \      %
%    |  ▓▓▓▓▓▓\\▓▓\ /  ▓▓ \▓▓▓▓▓▓\ ▓▓▓▓▓▓▓\  |  ▓▓▓▓▓▓▓\▓▓▓▓▓▓ | ▓▓  | ▓▓      %
%    | ▓▓    ▓▓ \▓▓\  ▓▓ /      ▓▓ ▓▓  | ▓▓   \▓▓    \  | ▓▓ __| ▓▓  | ▓▓      %
%    | ▓▓▓▓▓▓▓▓  \▓▓ ▓▓ |  ▓▓▓▓▓▓▓ ▓▓  | ▓▓__ _\▓▓▓▓▓▓\ | ▓▓|  \ ▓▓__/ ▓▓      %
%     \▓▓     \   \▓▓▓   \▓▓    ▓▓ ▓▓  | ▓▓  \       ▓▓  \▓▓  ▓▓\▓▓    ▓▓      %
%      \▓▓▓▓▓▓▓    \▓     \▓▓▓▓▓▓▓\▓▓   \▓▓\▓▓\▓▓▓▓▓▓▓    \▓▓▓▓ _\▓▓▓▓▓▓▓      %
%                                                              |  \__| ▓▓      %
%                                                               \▓▓    ▓▓      %
%                                                                \▓▓▓▓▓▓       %
%                                                                              %
% https://github.com/vEnhance/dotfiles/blob/main/texmf/tex/latex/evan/evan.sty %


% ░█▄█░▄▀▄░█░░▒█░░░▀█▀░▄▀▄░░░█▒█░▄▀▀▒██▀
% ▒█▒█░▀▄▀░▀▄▀▄▀▒░░▒█▒░▀▄▀▒░░▀▄█▒▄██░█▄▄
%
% If you don't know how to use this file, read:
% +--------------------------------------------+
% | https://web.evanchen.cc/faq-latex.html#L-4 |
% +--------------------------------------------+
%
% TL;DR of the Boost license conditions are as follows:
%
% 1. Any SOURCE VERSIONS must cite evan.sty and the Boost license below.
% 2. For COMPILED PDF OUTPUT, attribution of evan.sty is OPTIONAL (but nice).
% 3. NO OTHER REQUIREMENTS; you may modify, redistribute, sell freely.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% BOOST SOFTWARE LICENSE - VERSION 1.0 - 17 AUGUST 2003
%
% Copyright (c) 2023 Evan Chen [evan at evanchen.cc]
% https://web.evanchen.cc/ || github.com/vEnhance
%
% Available for download at:
% https://github.com/vEnhance/dotfiles/blob/main/texmf/tex/latex/evan/evan.sty
%
% Permission is hereby granted, free of charge, to any person or organization
% obtaining a copy of the software and accompanying documentation covered by
% this license (the "Software") to use, reproduce, display, distribute,
% execute, and transmit the Software, and to prepare derivative works of the
% Software, and to permit third-parties to whom the Software is furnished to
% do so, all subject to the following:
%
% The copyright notices in the Software and this entire statement, including
% the above license grant, this restriction and the following disclaimer,
% must be included in all copies of the Software, in whole or in part, and
% all derivative works of the Software, unless such copies or derivative
% works are solely in the form of machine-executable object code generated by
% a source language processor.
%
% THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
% SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
% FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
% ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
% DEALINGS IN THE SOFTWARE.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%fakesection Argument processing
% Default Arguments
% We include "Evan" in all of these to make sure
% that they don't collide with anything in external packages
\newif\ifevanfancy\evanfancytrue
\newif\ifevanhdr\evanhdrtrue
\newif\ifevanhref\evanhreftrue
\newif\ifevansetup\evansetuptrue
\newif\ifevanthm\evanthmtrue
\newif\ifevansecthm\evansecthmfalse
\newif\ifevanht\evanhtfalse
\newif\ifevanpkg\evanpkgtrue
\newif\ifevanpdf\evanpdftrue
\newif\ifevanauthor\evanauthortrue
\newif\ifevanchinese\evanchinesefalse
\newif\ifevanmdthm\evanmdthmfalse
\newif\ifevanpatchasy\evanpatchasyfalse
\newif\ifevanhints\evanhintsfalse
\newif\ifevanasy\evanasytrue
\newif\ifevancolorsec\evancolorsecfalse
\newif\ifevantitlemark\evantitlemarktrue
\newif\ifevanvonenabled\evanvonenabledfalse
\newif\ifevanbritish\evanbritishtrue
\newif\ifevanbib\evanbibfalse

%Receive Arguments
\DeclareOption{chinese}{\evanchinesetrue} % Chinese support
% allow href to override this one

\DeclareOption{sexy}{\evansecthmtrue\evanmdthmtrue\evancolorsectrue} % long docs

\DeclareOption{fancy}{\evanfancytrue}
\DeclareOption{nofancy}{\evanfancyfalse}
\DeclareOption{hdr}{\evanhdrtrue}
\DeclareOption{nohdr}{\evanhdrfalse}
\DeclareOption{href}{\evanhreftrue}
\DeclareOption{nohref}{\evanhreffalse}

\DeclareOption{nosetup}{\evansetupfalse}
\DeclareOption{thm}{\evanthmtrue}
\DeclareOption{nothm}{\evanthmfalse}
\DeclareOption{secthm}{\evansecthmtrue}
\DeclareOption{nosecthm}{\evansecthmfalse}

\DeclareOption{ht}{\evanhttrue}
\DeclareOption{nopdf}{\evanpdffalse}
\DeclareOption{nopkg}{\evanpkgfalse}
\DeclareOption{noauthor}{\evanauthorfalse}
\DeclareOption{titlemark}{\evantitlemarktrue} % Sets title in ohead, not \rightmark
\DeclareOption{sectionmark}{\evantitlemarkfalse} % Uses \rightmark not title in ohead

\DeclareOption{mdthm}{\evanmdthmtrue}
\DeclareOption{nomdthm}{\evanmdthmfalse}
\DeclareOption{colorsec}{\evancolorsectrue}
\DeclareOption{nocolorsec}{\evancolorsecfalse}

\DeclareOption{patchasy}{\evanpatchasytrue}
\DeclareOption{noasy}{\evanasyfalse}
\DeclareOption{hints}{\evanhintstrue}
\DeclareOption{von}{\evanvonenabledtrue}

\DeclareOption{british}{\evanbritishtrue}
\DeclareOption{american}{\evanbritishfalse}

\DeclareOption{bib}{\evanbibtrue}

% legacy diagrams option, for backwards compatibility
\DeclareOption{diagrams}{}
\DeclareOption{nodiagrams}{}

\ProcessOptions\relax

% if packages not loaded, turn off mdthm and asy
\ifevanpkg\else\evanmdthmfalse\fi
\ifevanpkg\else\evanasyfalse\fi

% If no setup, turn off theorems
\ifevansetup\else\evanthmfalse\fi

%%fakesection Some macros
%Small commands
\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifevanpkg
  \usepackage[minimal]{yhmath}
  \usepackage{derivative}
\fi
\newcommand{\cbrt}[1]{\sqrt[3]{#1}}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceiling}[1]{\left\lceil #1 \right\rceil}
\newcommand{\mailto}[1]{\href{mailto:#1}{\texttt{#1}}}
\newcommand{\ol}{\overline}
\newcommand{\ul}{\underline}
\newcommand{\wt}{\widetilde}
\newcommand{\wh}{\widehat}
\newcommand{\eps}{\varepsilon}
\newcommand{\vocab}[1]{\textbf{\color{blue}\sffamily #1}}
\providecommand{\alert}{\vocab}
\providecommand{\half}{\frac{1}{2}}
\newcommand{\catname}{\mathsf}
\newcommand{\hrulebar}{
  \par\hspace{\fill}\rule{0.95\linewidth}{.7pt}\hspace{\fill}
  \par\nointerlineskip \vspace{\baselineskip}
}
\providecommand{\arc}[1]{\wideparen{#1}}

%For use in author command
\newcommand{\plusemail}[1]{\\ \normalfont \texttt{\mailto{#1}}}

%More commands and math operators
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator*{\argmin}{arg min}
\DeclareMathOperator*{\argmax}{arg max}

%Convenient Environments
\newenvironment{soln}{\begin{proof}[Solution]}{\end{proof}}
\newenvironment{parlist}{\begin{inparaenum}[(i)]}{\end{inparaenum}}
\newenvironment{gobble}{\setbox\z@\vbox\bgroup}{\egroup}

%Inequalities
\newcommand{\cycsum}{\sum_{\mathrm{cyc}}}
\newcommand{\symsum}{\sum_{\mathrm{sym}}}
\newcommand{\cycprod}{\prod_{\mathrm{cyc}}}
\newcommand{\symprod}{\prod_{\mathrm{sym}}}

%From H113 "Introduction to Abstract Algebra" at UC Berkeley
\newcommand{\CC}{\mathbb C}
\newcommand{\FF}{\mathbb F}
\newcommand{\NN}{\mathbb N}
\newcommand{\QQ}{\mathbb Q}
\newcommand{\RR}{\mathbb R}
\newcommand{\ZZ}{\mathbb Z}
\newcommand{\charin}{\text{ char }}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Inn}{Inn}
\DeclareMathOperator{\Syl}{Syl}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\GL}{GL} % General linear group
\DeclareMathOperator{\SL}{SL} % Special linear group
\DeclareMathOperator{\Vol}{Vol} % Special linear group

%From Kiran Kedlaya's "Geometry Unbound"
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\dang}{\measuredangle} %% Directed angle
\newcommand{\ray}[1]{\overrightarrow{#1}}
\newcommand{\seg}[1]{\overline{#1}}

%From M275 "Topology" at SJSU
\DeclareMathOperator{\id}{id}
\newcommand{\taking}[1]{\xrightarrow{#1}}
\newcommand{\inv}{^{-1}}

%From M170 "Introduction to Graph Theory" at SJSU
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\ord}{ord}
\newcommand{\defeq}{\overset{\mathrm{def}}{=}}

%From the USAMO .tex files
\newcommand{\ts}{\textsuperscript}
\newcommand{\dg}{^\circ}
\newcommand{\ii}{\item}

% From Math 55 and Math 145 at Harvard
\newenvironment{subproof}[1][Proof]{%
\begin{proof}[#1] \renewcommand{\qedsymbol}{$\blacksquare$}}%
{\end{proof}}

\newcommand{\liff}{\leftrightarrow}
\newcommand{\lthen}{\rightarrow}
\newcommand{\opname}{\operatorname}
\newcommand{\surjto}{\twoheadrightarrow}
\newcommand{\injto}{\hookrightarrow}
\newcommand{\On}{\mathrm{On}} % ordinals
\DeclareMathOperator{\img}{im} % Image
\DeclareMathOperator{\Img}{Im} % Image
\DeclareMathOperator{\coker}{coker} % Cokernel
\DeclareMathOperator{\Coker}{Coker} % Cokernel
\DeclareMathOperator{\Ker}{Ker} % Kernel
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Spec}{Spec} % spectrum
\DeclareMathOperator{\Tr}{Tr} % trace
\DeclareMathOperator{\pr}{pr} % projection
\DeclareMathOperator{\ext}{ext} % extension
\DeclareMathOperator{\pred}{pred} % predecessor
\DeclareMathOperator{\dom}{dom} % domain
\DeclareMathOperator{\ran}{ran} % range
\DeclareMathOperator{\Hom}{Hom} % homomorphism
\DeclareMathOperator{\Mor}{Mor} % morphisms
\DeclareMathOperator{\End}{End} % endomorphism

% Things Lie
\newcommand{\kb}{\mathfrak b}
\newcommand{\kg}{\mathfrak g}
\newcommand{\kh}{\mathfrak h}
\newcommand{\kn}{\mathfrak n}
\newcommand{\ku}{\mathfrak u}
\newcommand{\kz}{\mathfrak z}
\DeclareMathOperator{\Ext}{Ext} % Ext functor
\DeclareMathOperator{\Tor}{Tor} % Tor functor
\newcommand{\gl}{\opname{\mathfrak{gl}}} % frak gl group
\def\sl{\opname{\mathfrak{sl}}} % frak sl group chktex 6

% More script letters etc.
\newcommand{\SA}{\mathcal A}
\newcommand{\SB}{\mathcal B}
\newcommand{\SC}{\mathcal C}
\newcommand{\SF}{\mathcal F}
\newcommand{\SG}{\mathcal G}
\newcommand{\SH}{\mathcal H}
\newcommand{\OO}{\mathcal O}

\newcommand{\SCA}{\mathscr A}
\newcommand{\SCB}{\mathscr B}
\newcommand{\SCC}{\mathscr C}
\newcommand{\SCD}{\mathscr D}
\newcommand{\SCE}{\mathscr E}
\newcommand{\SCF}{\mathscr F}
\newcommand{\SCG}{\mathscr G}
\newcommand{\SCH}{\mathscr H}

% Mathfrak primes
\newcommand{\km}{\mathfrak m}
\newcommand{\kp}{\mathfrak p}
\newcommand{\kq}{\mathfrak q}

%%fakesection Asymptote setup
\ifevanasy
  \ifevanpatchasy
    \usepackage{patchasy}
  \else
    \usepackage{asymptote}
  \fi
  \begin{asydef}
    defaultpen(fontsize(10pt));
    size(8cm); // set a reasonable default
    usepackage("amsmath");
    usepackage("amssymb");
    settings.tex="pdflatex";
    settings.outformat="pdf";
    // Replacement for olympiad+cse5 which is not standard
    import geometry;
    // recalibrate fill and filldraw for conics
    void filldraw(picture pic = currentpicture, conic g, pen fillpen=defaultpen, pen drawpen=defaultpen)
      { filldraw(pic, (path) g, fillpen, drawpen); }
    void fill(picture pic = currentpicture, conic g, pen p=defaultpen)
      { filldraw(pic, (path) g, p); }
    // some geometry
    pair foot(pair P, pair A, pair B) { return foot(triangle(A,B,P).VC); }
    pair centroid(pair A, pair B, pair C) { return (A+B+C)/3; }
    // cse5 abbreviations
    path CP(pair P, pair A) { return circle(P, abs(A-P)); }
    path CR(pair P, real r) { return circle(P, r); }
    pair IP(path p, path q) { return intersectionpoints(p,q)[0]; }
    pair OP(path p, path q) { return intersectionpoints(p,q)[1]; }
    path Line(pair A, pair B, real a=0.6, real b=a) { return (a*(A-B)+A)--(b*(B-A)+B); }
    // cse5 more useful functions
    picture CC() {
      picture p=rotate(0)*currentpicture;
      currentpicture.erase();
      return p;
    }
    pair MP(Label s, pair A, pair B = plain.S, pen p = defaultpen) {
      Label L = s;
      L.s = "$"+s.s+"$";
      label(L, A, B, p);
      return A;
    }
    pair Drawing(Label s = "", pair A, pair B = plain.S, pen p = defaultpen) {
      dot(MP(s, A, B, p), p);
      return A;
    }
    path Drawing(path g, pen p = defaultpen, arrowbar ar = None) {
      draw(g, p, ar);
      return g;
    }
  \end{asydef}
\fi

%%fakesection BEGIN MAIN SETUP
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\ifevansetup
  %%fakesection Set up author and date
  \ifevanauthor
    \title{} % empty title to avoid crashes
    \ifluatex
      \author{Lakshya P, Shams Shawan Hoque,Sanskar}
    \else
      \author{Lakshya P, Shams Shawan Hoque, Sanskar}
    \fi
    \date{\today}
  \fi
  %%fakesection Hyperref
  \ifevanpkg
    \PassOptionsToPackage{svgnames,dvipsnames,table}{xcolor}
    \usepackage{xcolor}
    \ifevanbib
      \usepackage[backend=biber,backref=true,style=alphabetic]{biblatex}
      \DeclareFieldFormat{labelalpha}{\textbf{\small #1}} % citation ID's in small-bold
      \DefineBibliographyStrings{english}{%
        backrefpage  = {cited p.}, % for single page number
        backrefpages = {cited pp.} % for multiple page numbers
      }
      \DeclareFieldFormat{journaltitle}{\mkbibemph{#1},} % italic journal title with comma
      \DeclareFieldFormat[inbook,thesis]{title}{\mkbibemph{#1}\addperiod} % italic title with period
      \DeclareFieldFormat[article]{title}{#1} % title of journal article is printed as normal text
      \DeclareFieldFormat[article]{volume}{\textbf{#1}\addcolon\space} % bold volume numbers
      % Separate ISBN-13 field
      \DeclareSourcemap{\maps[datatype=bibtex]{\map{\step[fieldsource=ISBN-13,fieldtarget=ISBN]}}}
      % Evan likes small caps for bibliography author names
      \renewcommand{\mkbibnamegiven}[1]{\textsc{#1}}
      \renewcommand{\mkbibnamefamily}[1]{\textsc{#1}}
      \renewcommand{\mkbibnameprefix}[1]{\textsc{#1}}
      \renewcommand{\mkbibnamesuffix}[1]{\textsc{#1}}
      % Drop trailing punctuation in bibliography names
      \renewcommand{\finentrypunct}{}
    \fi
    \ifevanhref
      \usepackage[colorlinks=true,pdfusetitle]{hyperref}
      \hypersetup{pdfkeywords={evan.sty},pdfsubject={web.evanchen.cc}}
      \hypersetup{urlcolor=RubineRed,linkcolor=RoyalBlue,citecolor=ForestGreen}
    \fi
    \usepackage[nameinlink]{cleveref}
  \fi

  %%fakesection New theorem styles
  \ifevanthm
    \usepackage{amsthm}
    \usepackage{thmtools}
  \fi
  \ifevanmdthm
    \ifevanthm
      %% theorem packages loaded already
    \else
      \usepackage{amsthm}
      \usepackage{thmtools}
    \fi
    \usepackage[framemethod=TikZ]{mdframed}
    \usetikzlibrary{shadows}
    % https://tex.stackexchange.com/a/292090/76888
    % https://github.com/marcodaniel/mdframed/issues/12
    \xpatchcmd{\endmdframed}
      {\aftergroup\endmdf@trivlist\color@endgroup}
      {\endmdf@trivlist\color@endgroup\@doendpe}
      {}{}

    \mdfdefinestyle{mdbluebox}{%
      roundcorner=10pt,
      linewidth=1pt,
      skipabove=12pt,
      innerbottommargin=9pt,
      skipbelow=2pt,
      linecolor=blue,
      nobreak=true,
      backgroundcolor=TealBlue!5,
    }
    \declaretheoremstyle[
      headfont=\sffamily\bfseries\color{MidnightBlue},
      mdframed={style=mdbluebox},
      headpunct={\\[3pt]},
      postheadspace={0pt}
    ]{thmbluebox}

    \mdfdefinestyle{mdredbox}{%
      linewidth=0.5pt,
      skipabove=12pt,
      frametitleaboveskip=5pt,
      frametitlebelowskip=0pt,
      skipbelow=2pt,
      frametitlefont=\bfseries,
      innertopmargin=4pt,
      innerbottommargin=8pt,
      nobreak=true,
      backgroundcolor=Salmon!5,
      linecolor=RawSienna,
    }
    \declaretheoremstyle[
      headfont=\bfseries\color{RawSienna},
      mdframed={style=mdredbox},
      headpunct={\\[3pt]},
      postheadspace={0pt},
    ]{thmredbox}

    \mdfdefinestyle{mdgreenbox}{%
      skipabove=8pt,
      skipbelow=0pt,
      linewidth=2pt,
      rightline=false,
      leftline=true,
      topline=false,
      bottomline=false,
      linecolor=ForestGreen,
      backgroundcolor=ForestGreen!5,
    }
    \declaretheoremstyle[
      headfont=\bfseries\sffamily\color{ForestGreen!70!black},
      bodyfont=\normalfont,
      spaceabove=2pt,
      spacebelow=1pt,
      mdframed={style=mdgreenbox},
      headpunct={ --- },
    ]{thmgreenbox}

    \mdfdefinestyle{mdblackbox}{%
      skipabove=8pt,
      linewidth=3pt,
      rightline=false,
      leftline=true,
      topline=false,
      bottomline=false,
      linecolor=black,
      backgroundcolor=RedViolet!5!gray!5,
    }
    \declaretheoremstyle[
      headfont=\bfseries,
      bodyfont=\normalfont\small,
      spaceabove=0pt,
      spacebelow=0pt,
      mdframed={style=mdblackbox}
    ]{thmblackbox}

    \mdfdefinestyle{mdpurplebox}{%
      roundcorner=10pt,
      linewidth=1pt,
      skipabove=12pt,
      skipbelow=12pt,
      innertopmargin=9pt,
      innerbottommargin=9pt,
      linecolor=black,
      nobreak=true,
      backgroundcolor=Orchid!10,
      shadow=true,
      shadowsize=6pt,
      shadowcolor=black!30,
      frametitleaboveskip=8pt,
      frametitlebelowskip=8pt,
      frametitlebackgroundcolor=Violet!50!black,
      frametitlefont=\bfseries\sffamily\color{white},
      frametitlerule=true,
    }
    \newcommand{\listhack}{$\empty$\vspace{-2em}}
  \fi

  %%fakesection Theorem setup
  \ifevanthm
    \theoremstyle{definition}
    %Branching here: the option secthm changes theorems to be labelled by section
    \ifevanmdthm
      \ifevansecthm
        \declaretheorem[style=thmbluebox,name=Theorem,numberwithin=section]{theorem}
      \else
        \declaretheorem[style=thmbluebox,name=Theorem]{theorem}
      \fi
      \declaretheorem[style=thmbluebox,name=Lemma,sibling=theorem]{lemma}
      \declaretheorem[style=thmbluebox,name=Proposition,sibling=theorem]{proposition}
      \declaretheorem[style=thmbluebox,name=Corollary,sibling=theorem]{corollary}
      \declaretheorem[style=thmbluebox,name=Assumption,sibling=theorem]{assume}
      \declaretheorem[style=thmbluebox,name=Theorem,numbered=no]{theorem*}
      \declaretheorem[style=thmbluebox,name=Lemma,numbered=no]{lemma*}
      \declaretheorem[style=thmbluebox,name=Proposition,numbered=no]{proposition*}
      \declaretheorem[style=thmbluebox,name=Corollary,numbered=no]{corollary*}
      \declaretheorem[style=thmbluebox,name=Assumption,numbered=no]{assume*}
    \else
      \ifevansecthm
        \declaretheorem[name=Theorem,numberwithin=section]{theorem}
      \else
        \declaretheorem[name=Theorem]{theorem}
      \fi
      \declaretheorem[name=Lemma,sibling=theorem]{lemma}
      \declaretheorem[name=Proposition,sibling=theorem]{proposition}
      \declaretheorem[name=Corollary,sibling=theorem]{corollary}
      \declaretheorem[name=Assumption,sibling=theorem]{assume}
      \declaretheorem[name=Theorem,numbered=no]{theorem*}
      \declaretheorem[name=Lemma,numbered=no]{lemma*}
      \declaretheorem[name=Proposition,numbered=no]{proposition*}
      \declaretheorem[name=Corollary,numbered=no]{corollary*}
      \declaretheorem[name=Assumption,numbered=no]{assume*}
    \fi

    \ifevanmdthm
      \declaretheorem[style=thmgreenbox,name=Algorithm,sibling=theorem]{algorithm}
      \declaretheorem[style=thmgreenbox,name=Algorithm,numbered=no]{algorithm*}
      \declaretheorem[style=thmgreenbox,name=Claim,sibling=theorem]{claim}
      \declaretheorem[style=thmgreenbox,name=Claim,numbered=no]{claim*}
    \else
      \declaretheorem[name=Algorithm,sibling=theorem]{algorithm}
      \declaretheorem[name=Algorithm,numbered=no]{algorithm*}
      \declaretheorem[name=Claim,sibling=theorem]{claim}
      \declaretheorem[name=Claim,numbered=no]{claim*}
    \fi

    \ifevanmdthm
      \declaretheorem[style=thmredbox,name=Example,sibling=theorem]{example}
      \declaretheorem[style=thmredbox,name=Example,numbered=no]{example*}
    \else
      \declaretheorem[name=Example,sibling=theorem]{example}
      \declaretheorem[name=Example,numbered=no]{example*}
    \fi

    % Remark-style theorems
    \ifevanmdthm
      \declaretheorem[style=thmblackbox,name=Remark,sibling=theorem]{remark}
      \declaretheorem[style=thmblackbox,name=Remark,numbered=no]{remark*}
    \else
      \declaretheorem[name=Remark,sibling=theorem]{remark}
      \declaretheorem[name=Remark,numbered=no]{remark*}
    \fi

    \ifevanmdthm
      \declaretheoremstyle[
        headfont=\color{blue!40!black}\normalfont\bfseries,
        spaceabove=8pt,
        spacebelow=8pt,
        bodyfont=\normalfont
      ]{basehead}
    \else
      \declaretheoremstyle[spaceabove=6pt,spacebelow=6pt]{basehead}
    \fi

    \declaretheorem[style=basehead,name=Answer,sibling=theorem]{answer}
    \declaretheorem[style=basehead,name=Answer,numbered=no]{answer*}
    \declaretheorem[style=basehead,name=Conjecture,sibling=theorem]{conjecture}
    \declaretheorem[style=basehead,name=Conjecture,numbered=no]{conjecture*}
    \declaretheorem[style=basehead,name=Definition,sibling=theorem]{definition}
    \declaretheorem[style=basehead,name=Definition,numbered=no]{definition*}
    \declaretheorem[style=basehead,name=Exercise,sibling=theorem]{exercise}
    \declaretheorem[style=basehead,name=Exercise,numbered=no]{exercise*}
    \declaretheorem[style=basehead,name=Fact,sibling=theorem]{fact}
    \declaretheorem[style=basehead,name=Fact,numbered=no]{fact*}
    \declaretheorem[style=basehead,name=Problem,sibling=theorem]{problem}
    \declaretheorem[style=basehead,name=Problem,numbered=no]{problem*}
    \declaretheorem[style=basehead,name=Question,sibling=theorem]{ques}
    \declaretheorem[style=basehead,name=Question,numbered=no]{ques*}

    \ifevanpkg
      \Crefname{answer}{Answer}{Answers}
      \Crefname{assume}{Assumption}{Assumptions}
      \Crefname{claim}{Claim}{Claims}
      \Crefname{conjecture}{Conjecture}{Conjectures}
      \Crefname{exercise}{Exercise}{Exercises}
      \Crefname{fact}{Fact}{Facts}
      \Crefname{problem}{Problem}{Problems}
      \Crefname{ques}{Question}{Questions}
    \fi
  \fi

  %%fakesection Fancy section and chapter heads
  \ifevancolorsec
    \@ifundefined{KOMAClassName}{}{
      \@ifundefined{chapter}{}{
        \addtokomafont{partprefix}{\rmfamily}
        \renewcommand*{\partformat}{\color{purple}
          \scalebox{2.5}{\thepart}\enlargethispage{2em}}
        \addtokomafont{chapterprefix}{\raggedleft}
        \RedeclareSectionCommand[beforeskip=0.5em]{chapter}
        \renewcommand*{\chapterformat}{\mbox{%
          \scalebox{1.5}{\chapappifchapterprefix{\nobreakspace}}%
          \scalebox{2.718}{\color{purple}\thechapter}\enskip}}
      }
      \renewcommand*{\sectionformat}%
        {\color{purple}\S\thesection\enskip}
      \renewcommand*{\subsectionformat}%
        {\color{purple}\S\thesubsection\enskip}
      \renewcommand*{\subsubsectionformat}%
        {\color{purple}\S\thesubsubsection\enskip}
      \addtokomafont{paragraph}{\color{orange!35!black}\P\ }
      \KOMAoptions{numbers=noenddot}
      %\usetocstyle{KOMAlike}
    }
  \fi

  %%fakesection Loads a bunch of useful packages (but allow disabling)
  \ifevanpkg
    \ifevanvonenabled
      \IfFileExists{von.sty}{\usepackage{von}}{}
    \fi
    \usepackage{listings}
    \usepackage{mathrsfs}
    \usepackage{textcomp}
    \lstset{basicstyle=\ttfamily\small,
      backgroundcolor=\color{yellow!3!white},
      breakatwhitespace=true,
      breaklines=true,
      commentstyle=\color{red!70!black},
      frame=shadowbox,
      frame=single,
      framerule=1pt,
      identifierstyle=\color{green!40!black},
      keywordstyle=\bfseries,
      keywordstyle=\bfseries\color{blue!80!black},
      numbers=left,
      numbersep=8pt,
      numberstyle=\scriptsize\sffamily\itshape\color{black!80},
      rulecolor=\color{blue!70!black},
      rulesepcolor=\color{blue!30!black},
      showstringspaces=false,
      stringstyle=\color{orange},
      tabsize=4,
      xleftmargin=15pt,
      xrightmargin=15pt,
      resetmargins=true,
    } % chktex 6
    \lstdefinelanguage{gitcommit}{
      alsoletter={:},
      morecomment=[l]{|},
      morekeywords={commit,Author:,Date:,chore,doc,edit,feat,fix,polish,style,tests,},
      sensitive=true,
    }
    \lstdefinelanguage{gitlog}{
      morekeywords={chore,doc,edit,feat,fix,polish,style,tests,},
      morecomment=[s]{[}{]}, % chktex 9
      sensitive=true,
    }

    \usepackage[shortlabels]{enumitem}
    \usepackage[obeyFinal,textsize=scriptsize,shadow,loadshadowlibrary]{todonotes}
    \usepackage{textcomp}
    \usepackage{multirow}
    \usepackage{ellipsis} % don't use ugly unicode ellipsis
    \usepackage{epigraph}
    \renewcommand{\epigraphsize}{\scriptsize}
    \renewcommand{\epigraphwidth}{60ex}

    % Tiny optimizations:
    \usepackage{mathtools}
    \usepackage{microtype}
    \usepackage{xstring}
    \usepackage{wrapfig}
    \ifevanbritish\usepackage[cleanlook,british]{isodate}\fi % day-first date
    \usepackage{tikz-cd}
    \usetikzlibrary{decorations.pathmorphing}
    \allowdisplaybreaks

    % a list I like for walkthrough's --- Drew-style parts
    \newlist{walk}{enumerate}{3}
    \setlist[walk]{label=\bfseries (\alph*)}
    % list item for MO style rubrics
    \newcommand{\worth}[1]{\def\hfill{\hskip 20pt plus 1fill}\dotfill%
      \IfEq{#1}{0}{\textbf{0~points}}%
      {\textbf{\color{blue}#1~point\IfEndWith{#1}{1}{}{s}}}%
      \par}
    \newcommand{\subworth}[1]{\def\hfill{\hskip 20pt plus 1fill}\dotfill%
      \IfEq{#1}{0}{{\footnotesize0~points}}%
      {\textbf{\footnotesize#1~point\IfEndWith{#1}{1}{}{s}}}%
      \par}
    \newlist{rubric}{enumerate}{2}
    \setlist[rubric,1]{label=\Roman*.}
    \setlist[rubric,2]{label=(\Roman{rubrici}.\alph*)}
  \fi

  %%fakesection \maketitle configuration
  \@ifundefined{KOMAClassName}%
    {} % do nothing outside KOMA class
    {% If KOMA exists. . .
    \addtokomafont{subtitle}{\Large}
    \setkomafont{author}{\Large\scshape}
    \setkomafont{date}{\Large\normalsize}
    }
  \providecommand{\thetitle}{\@title}
  \providecommand{\theauthor}{\@author}
  \providecommand{\thedate}{\@date}

  %%fakesection Page setup
  \ifevanfancy
    \@ifundefined{KOMAClassName}
    {
      \usepackage{fancyhdr}
      \setlength{\headheight}{0.75in}
      \setlength{\oddsidemargin}{0in}
      \setlength{\evensidemargin}{0in}
      \setlength{\voffset}{-1.0in}
      \setlength{\headsep}{10pt}
      \setlength{\textwidth}{6.5in}
      \setlength{\headwidth}{6.5in}
      \setlength{\textheight}{8.75in}
      \setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}
      \setlength{\footskip}{0.3in}
      \ifevanhdr
        \renewcommand{\headrulewidth}{0.5pt}
        \renewcommand{\footrulewidth}{0.0pt}
        \pagestyle{fancy}
        \lhead{Evan Chen}
        \chead{}
        \rhead{\nouppercase{\leftmark}}
        \lfoot{}
        \cfoot{\thepage}
        \rfoot{}
      \fi
    }
    {
      \usepackage[headsepline]{scrlayer-scrpage}
      \renewcommand{\headfont}{}
      \addtolength{\textheight}{3.14cm}
      \setlength{\footskip}{0.5in}
      \setlength{\headsep}{10pt}
      \ihead{\footnotesize\textbf{\theauthor} --- \thedate}
      \automark{section}
      \chead{}
      \ohead{\footnotesize\textbf{\thetitle}}
      \cfoot{\pagemark}
    }
  \fi

  %%fakesection Unicode
  \ifevanpkg
    \ifluatex
      \ifevanchinese
        \usepackage{luatexja-fontspec}
      \else
        \usepackage{fontspec}
      \fi
      % https://tex.stackexchange.com/a/572220/76888
      \directlua{luaotfload.add_fallback
        ("evans_fallbacks",
          {
            "NotoColorEmoji:mode=harf;",
            "Source Han Sans TW:style=Regular;",
            "Noto Serif CJK SC:style=Regular;",
          }
        )}
      \setmainfont{lmroman10-regular}[
        BoldFont=lmroman10-bold,
        ItalicFont=lmroman10-italic,
        BoldItalicFont=lmroman10-bolditalic,
        SlantedFont=lmromanslant10-regular,
        BoldSlantedFont=lmromanslant10-bold,
        SmallCapsFont=lmromancaps10-regular,
        RawFeature={fallback=evans_fallbacks}
      ]
      \setsansfont{lmsans10-regular}[
        BoldFont=lmsans10-bold,
        ItalicFont=lmsans10-oblique,
        BoldItalicFont=lmsans10-boldoblique,
        RawFeature={fallback=evans_fallbacks}
      ]
      \ifevanchinese
        \setmainjfont{Source Han Sans TW}[RawFeature={fallback=evans_fallbacks}]
        \setsansjfont{Source Han Sans TW}[RawFeature={fallback=evans_fallbacks}]
      \fi
    \else
      \ifevanchinese
        \usepackage{babel}
        \usepackage[encapsulated]{CJK}
        \usepackage{ucs}
        \usepackage[utf8x]{inputenc}
        \newenvironment{bsmi}{\begin{CJK}{UTF8}{bsmi}}{\end{CJK}}
        \newcommand{\cn}[1]{\begin{bsmi}#1\end{bsmi}}
        \AtBeginDocument{\begin{CJK}{UTF8}{bsmi}}
        \AtEndDocument{\end{CJK}}
      \fi
    \fi
  \fi

  %%fakesection Hints
  \ifevanhints
    \usepackage{answers}
    \Newassociation{hint}{hintitem}{hints}
    \renewcommand{\solutionextension}{out}
    \Opensolutionfile{hints}
    \newcommand{\makehints}{\Closesolutionfile{hints}\input{hints.out}} % chktex 27
  \fi
%%fakesection END MAIN SETUP
\fi













\documentclass[11pt]{scrartcl}
\usepackage{graphicx} % Required for inserting images
\usepackage[sexy,hints]{evan}
\usepackage{asymptote}
\usepackage{tikz}
\usetikzlibrary{intersections}
\title{OG! Sophie fellowship Application}
\author{Sanskar Gupta}
\date{March 2025}

\begin{document}

\maketitle

\section{Introduction}
OG! This is my application for the Sophie fellowship. 
\section{Solutions}
\begin{problem*}[1]
    Let $D$ be a point chosen on side $BC$ of triangle $\triangle ABC$ with incenter $I$. The perpendicular bisector of $BC$ meets $BI$ and $CI$ at $U$ and $V$ respectively. The circle $(BDU)$ intersects $AB$ at $E$, and the circle $(CDV)$ intersects $AC$ at $F$. The circles $(BDU)$ and $(CDV)$ meet at $K$. Prove that the points $E, F, K, I$ are concyclic.
\end{problem*}
\paragraph{Solution:}


We shall use the following important lemma:

\begin{lemma*}
    Given a a triangle $ABC$ with $AB \neq AC$; and a point $E$ such that $EB=EC, \ \angle BAE = \angle CAE$, then $A,B,E,C$ are concyclic
\end{lemma*}

Assume the contrary, then let the circumcircle of triangle $ABC$ intersect $AE$ at $D$ \begin{figure}[h]
    \centering
    \includegraphics[width=0.5\linewidth]{OG.png}
    \label{fig:enter-label}
\end{figure}. 
We have that since $ABCD$ is cyclic, \\ $$\angle DBC= \angle DAC= \angle DAB = \angle DCB \implies DB=DC$$ since we also have $EB=EC$, we have that $AE $ is the perpendicular bisector of $BC$, since $AE$ is also the angle bisector of $\angle ABC$, we have that $AB=AC$, which is a contradiction. \\\\


\textbf{Now, we shall prove that $AEFK, AEIF$ are cyclic, which implies that $EFKI$ is also cyclic.} \\

$\bullet$ We have that $EBDK$ is cyclic and $FCDK$ is cyclic, then by miquel point lemma or miquel theorem, \textbf{$AEKF$ is also cyclic }.\\

$\bullet$
We have that, In $\triangle BEU \ \text{and} \ \triangle CDU$, \begin{itemize}[$\square$]
    \item $BU=CU$($U$ lies on the perpendicular bisector of $BC$)\\
    \item$\angle EBU= \angle UBC= \angle UCD$ ($U$ lies on the perpendicular bisector of $BC$)\\
    \item $\angle BEU = \angle CDU$(since, $BDUE$ is cyclic, and the opposite exterior angle is equal to the interior angle in a cyclic quadrilateral)\\
\end{itemize} 

Hence, $$\triangle BEU \equiv  \triangle CDU(AAS) \implies BE =CD$$. Similarly $BD= CF$. \\ So, $$BE+CF=BD+CD=BC$$\\
Let $ J,K, L$ be foot of perpendicular from $I $ onto $AB, AC,  BC $ respectively.\\
We have that \\$$IA=IA, 
\ \ \angle IAJ = \angle IAK,  \ \ \angle IJA= \angle IKA= 90^{\circ} \implies  \triangle IAJ \equiv \triangle IAK(AAS)$$$$ \implies\boxed{ IJ=IK}, \ \boxed{AK=AJ}$$\\
similarly $IJ=IK= IL, \ \  BJ= BL, \ \ \ CL=CK  \implies CK+ BJ= CL+BL=BC= BE+CF \implies CF-CK= BJ-BE \implies FK= JE$\\ In $\triangle FKI, \triangle EJI$\\
$$FK=JE, IJ=IK, \angle FKI = \angle EJI= 90^{\circ } \implies  \\
\triangle FKI \equiv EJI(RHS) \implies \boxed{IF=IE}$$ \\ Now we have 2 cases:\\\\
$\blacksquare $If $AE \neq AF$, then since $IE=IF$; by our lemma, $AEIF$ is cyclic as desired. \\
$\blacksquare$   If $AE=AF=x$, we also have that $AK = AJ=y$, $BE+CF= BK+CJ= BC$, \\
$$AC+AB- (BE+CF)=AC+AB-( BK+CJ), \implies AF+AE= AK+AY \implies 2x= 2y \implies x= y $$\\ This means $AE= AK$, \ $AF= AJ$ this means that $E=K$ and $F=J$ \\
Now we have that $\angle AEI+ \angle AFI = \angle AKI + AJI = 90^{\circ}+90^{\circ}= 180^{\circ}$\\
Hence, $AEIF$ is cyclic as desired. 

\newpage



\begin{problem*}[2]
Find all polynomials $P$ with integer coefficients, such that for all positive integers $n$, the expression $P(2025^n −1)P(2025^n−2) \cdots P(2025^n−2025)$ is divisible by $n$

\end{problem*}
\paragraph{Solution:}
Set $n=pq$ where $p,q$ are 2 primes $>2025$,\\ we have that 
$p \mid pq \mid P(2025^{pq}−1)P(2025^{pq}−2) \cdots P(2025^{pq}−2025) $, note that :\\
$ \bullet 2025^{pq} \equiv (2025^p)^q \equiv 2025^q \pmod p $\\
$\bullet a \equiv b  \pmod p \implies P(a) \equiv P(b) \pmod p$ since $P$ is a polynomial with integer coefficients, this is well known. \\\\
Thus, $p \mid P(2025^{q}−1)P(2025^{q}−2) \cdots P(2025^{q}−2025) $. \\Setting $p$ as arbitrarily large , we get that one of $P(2025^{q}−1); P(2025^{q}−2) ; \cdots ; P(2025^{q}−2025) $ is 0, or in other words, one of $2025^{q}−1, 2025^{q}−2 \cdots 2025^{q}−2025 $ is zero of $P$.\\\\ Define the set $S_q = {2025^{q}−1, 2025^{q}−2 \cdots 2025^{q}−2025 }$( for $q> 2025$). We have that for each such set $S_q$, at least one of its elements is a zero of $P$. \\\\ Note that: \\
$-$ There are infinitely many such sets( because of the existence of infinitely many primes $> 2025$)\\
$-$  There is no element which is common to infinitely many of these sets($S_q$). \\\\
Thus, we have that $P$ has infinitely many zeros. This can happen only when 
$P \equiv 0$ i.e $P(x)= 0$ which satisfies the problem conditions. \\\\ Hence, this is the only solution. 


\newpage
\begin{problem*}[4]
2025 cats, starting at distinct positions, have begun to roam the land, each with the
same speed but in distinct directions. Show that in some time from now the cats will be
positioned at the vertices of a convex polygon.
\end{problem*}
\paragraph{Solution:}

Extend the line direction of cats to mark all possible intersection points of the lines and draw a circle($ \Omega$) which contains all the intersection points along with all the cats, just for an example, here is a diagram with 4 cats, were intersection points are marked red and cats are not marked: \\\\ 
\begin{tikzpicture}
\draw[name path=line 1] (-1,2) -- (2,-4);
\draw[name path=line 2] (-3,-3) -- (2,2);
\draw[name path=line 3] (-5,-3) -- (4,1);
\draw[name path=line 4] (-1,1) -- (4,-1);
    \fill[red,name intersections={of=line 1 and line 2,total=\t}]
    \foreach \s in {1,...,\t}{(intersection-\s) circle (2pt) node {\footnotesize\s}};
    \fill[red,name intersections={of=line 2 and line 3,total=\t}]
    \foreach \s in {1,...,\t}{(intersection-\s) circle (2pt) node {\footnotesize\s}};
    \fill[red,name intersections={of=line 1 and line 3,total=\t}]
    \foreach \s in {1,...,\t}{(intersection-\s) circle (2pt) node {\footnotesize\s}};
    \fill[red,name intersections={of=line 1 and line 4,total=\t}]
    \foreach \s in {1,...,\t}{(intersection-\s) circle (2pt) node {\footnotesize\s}};
    \fill[red,name intersections={of=line 2 and line 4,total=\t}]
    \foreach \s in {1,...,\t}{(intersection-\s) circle (2pt) node {\footnotesize\s}};
   \fill[red,name intersections={of=line 3 and line 4,total=\t}]
    \foreach \s in {1,...,\t}{(intersection-\s) circle (2pt) node {\footnotesize\s}};
     \draw[red,name intersections={of=line 1 and line 2,total=\t}]
    \foreach \s in {1,...,\t}{(intersection-\s) circle (70pt) node {\footnotesize\s}};
    
    
\end{tikzpicture}

Now let us say after time $t$, all cats are out of the circle on their respective lines. 
Let $H$ denote the convex hull of the cats, which contains cats instead of points.\\ After time $t$, Consider $H$.\textbf{\textit{ Now we have the following claims, assuming that time elapsed is greater than $t$ seconds.}\textit{ Before the claims I will give an obvious lemma.}} \\
\begin{lemma*}
    consider a cat $C$. Plot the cats in the $x-y$ plane. with \textbf{$+Y$} axis being the line on which $C$ travels. \\
    $$ \text{the y-coordinate of $C$ is the maximum among all the cats} \implies C \in H $$
\end{lemma*}
\proof
This is obvious, if $C$ has the maximum y- coordinate then $C \in H$. \\ 

    



\begin{claim}
consider a cat $C$. Plot the cats in the $x-y$ plane. with \textbf{$+Y$} axis being the line on which $C$ travels. Eventually, $C$ will end up having the maximum $y-cordinate$ and shall then onward have it forever. 
 \end{claim}
 The velocity of $C$ is +ve $Y$ direction is $v$. consider any other cat with its line of direction at an angle $\theta \neq 0$ to the $+Y- axis$.(If $\theta = 0$, then 2 cats would have the same direction) ,\\\\ then, its velocity would be equal $v\cos \theta < v(1)= v$. Hence $C$ has a velocity in $Y$  direction which is  greater than any other cat, it follows that it shall eventually overtake every cat and have the maximum $y-coordinate$ forever thereafter\\\\
\textbf{Using our lemma, this well establishes that each cat will eventually end up in $H$ and so thus, all cats will be on the vertices of a convex polygon.}
    OG! 
\newpage
\begin{problem*}[5]
    Let $\triangle ABC$ be a triangle with points $M, N$ on side $BC$ satisfying $BM = CN$.  
Let $E$ and $F$ be the foot of the altitudes from $B$ and $C$ onto $AC$ and $AB$ respectively.  
Let the circumcircle of $\triangle BMF$ meet $BE$ again at $P$, and the circumcircle of $\triangle CNE$ meet $CF$ again at $Q$.  
Show that $\angle BAP = \angle CAQ$.
\end{problem*}
\paragraph{Solution:}
\begin{figure}[h]
    \centering
    \includegraphics[width=0.75\linewidth]{OG sophie P5.PNG}
    
    \label{fig:enter-label}
\end{figure}
It is easy to see that $FEBC$ is cyclic since $\angle CFB= \angle BEC= 90^{\circ}$. This means that $\angle ABE= \angle ACF$. \\
If we show that $\frac{AB}{BP}= \frac{AC}{CQ}$ then $\triangle ABP \sim \triangle ACQ(SAS) \implies \angle PAB = \angle CAQ $.\\
Hence it suffices to show that $\frac{AB}{BP}= \frac{AC}{CQ} \iff \frac{AB}{AC}= \frac{BP}{CQ} \iff \frac{ \sin C}{ \sin B}= \frac{BP} {CQ} \iff  \frac{BC \sin C}{BC \sin B}= \frac{BP} {CQ} \iff \frac{BE}{CF}= \frac{BP}{CQ} \iff \frac{BP}{BE}= \frac{CQ}{CF} . $


\newpage
\begin{problem*}[7]
    Given a sequence of real numbers \(X_1, X_2, X_3, \dots\) and a natural number \(T\), prove that if among all possible ordered \(T\)-element sets of the form 
\[
(X_{+1}, X_{k+2}, \dots, X_{k+T})
\]
there are no more than \(T\) distinct sets, then the sequence \(X_1, X_2, X_3, \dots\) is eventually periodic.
\end{problem*}
\paragraph{Solution:}
OG! We shall perform induction on $T$, with base case $T=1$, being trivial(as for $T=1$, the sequence is constant):\\ We define the\textbf{ ordered set}
$S_i=\{X_{i+1}, X_{i+2} \cdots X_{i+T} \}$ for $i \in Z^+ \cup\{0\} $
Assume the problem statement holds true for $T-1$, now consider problem statement for some $T$ \\
\begin{claim*}
    There are no more than $T$ distinct numbers in the sequence.
\end{claim*}
\proof Assume there are $T+1$ distinct numbers ${X_{a_1} , X_{a_2} \cdots X_{a_{T+1}}}$. where $a_i \in Z^+$, then we have that \textbf{the ordered sets} $$S_{a_1-1}, S_{a_2-1} \cdots S_{a_  {T+1}-1}$$ are all distinct because all of them have different first element. \\( Remember the first element of $S_{a_i-1}= X_{a_i}$ which are all distinct due to our assumption)\\
However, this contradicts the fact that there are at most $T$ such distinct sets $S$.\\ Now we will have the following lemma:
\begin{lemma*}
    If in an infinite sequence of finite distinct terms, the next term after each particular term is fixed eventually, then the sequence is eventually periodic. In other words, \\\\\\\\ If in an infinite sequence $K_i$ of  finite distinct terms, $i$ is a non-negative integer, there exists an integer $N$, such that for all $i>N$, $K_{i+1}= f(K_i)$ where $f$ is any function over the terms in the sequence, the sequence $K_i $ is eventually periodic. 
\end{lemma*}
\proof

Consider the following cases:

$\bullet$\textit{ There are exactly $T$  distinct numbers in the sequence.} 
Again, since there are $T$ numbers and for each number we have a distinct ordered set $S_i$ beginning with it,there are atleast $T$ distinct ordered sets $S_i$,  Since there are at most $T$ distinct ordered  set $S_i$, \\\\ We must have that there are exactly $T$ ordered sets $S_i $ each beginning with a different number.\\  \textbf{We have that for a particular number the next number after it in the sequence is the next element of a $S_i$, which begins with that number.} Since there is exactly 1 such  $S_i$. We have that the next number is fixed(i.e is the next element of $S_i$ which begins with $T$). \\
\textbf{This means that the next number in the sequence after any particular number is fixed. i.e. $X_{i+1}= f(X_i)$. This means the sequence is eventually periodic by our lemma.\\\\}

$\bullet$ \textit{There are at most $T-1$ elements in the sequence.}  \\
Define the ordered set of first $T-1$ elements of $S_i$(in order) as $Q_i$ and define  $R_i$ as the ordered set of last $T-1$ elements of $S_i$. \\
i.e. If $S_i=\{1,2,3 \cdots ,T\} \implies Q_i=\{1,2, \cdots T-1 \},R_i=\{2,3 \cdots ,T\}$, \textbf{where $R_i, Q_i, S_i$ are ordered sets}. 
\textbf{Observe that $R_{i}=Q_{i+1} $}. and also since there are atmost $T$ distinct $S_i$, there are at most $T$ distinct $Q_i$  \\ Now we divide this case into further 2 cases:\\
 \indent $\square$ \textbf{\textit{There are exactly}} $T$ \textbf{\textit{distinct }}$Q_i$\\
Since each $Q_i$ is a subset of $S_i$ and since there are at most $T$ distinct $S_i$, There must be exactly $T$ distinct  $S_i$, each of which have a distinct $Q_i$.\\
In particular, we have that there are no 2 distinct $S_i$, which have the same $Q_i$.  or \\
$Q_i=Q_j \implies S_i=S_j$\\ We have the following claim:
\begin{claim*}
    The sequence $S_1, S_2, S_3 \cdots $ is eventually periodic. 
\end{claim*}
\proof Consider a term of the sequence $S_i$, then $R_i$ is fixed. This means $Q_{i+1}$ is also fixed( since $Q_{i+1}= R_i$), this means $S_{i+1}$ is fixed, since each $Q_i$ uniquely determines $S_i$ because we have that there are no 2 distinct $S_i$, which have the same $Q_i$.\\

Hence again $f(S_i)= S_{i+1}$ and since the sequence contains a finite number(at most $T$) distinct terms, we must have that, by our lemma the sequence is eventually periodic. \\ We have that
$S_i=\{X_{i+1}, X_{i+2} \cdots X_{i+T} \}$, So if $S_i$ is eventually periodic, then $X_i$ is also eventually periodic. \\\\
\indent $\square $ \textbf{\textit{There are at most $T-1$ distinct $Q_i$}}.\\ 
Since we have at most $T-1$ distinct numbers in the sequence as well this get reduced to the case of  $T-1$, but this is true by induction hypothesis as desired. 

\newpage
\begin{problem*}[8]
find all pairs of positive integers $(m,n)$ such that: 
$$m^n \mid n^m-1$$

\end{problem*}
\paragraph{Solution:}
We claim the answer is $(m,n)= (1,x); (x,1); (2,3)$ where $x \in Z^+$.
In our solution we shall use the following lemma: 
\begin{lemma*}[Lifting the exponent/ LTE ]
Let $v_p(x)$ denote the maximal integer $k$ such that $p^k \mid x $\\
   $\bullet$ for any odd prime $p \mid a-b$ $$v_p(a^x-b^x)= v_p(a-b)+v_p(x)$$ \\ $\bullet$ for $x \equiv 0 \pmod 2$, $a \equiv b \pmod2$;
$$v_2(a^x-b^x)= v_2(a-b)+ v_2(a+b)+ v_2(x)-1$$ 
\end{lemma*}
$-$ If $m=1$ then any positive integer $n$ works.\\
$-$ If $n=1$, then any positive integer $m$ works.\\
Henceforth assume, $m,n>1$. Consider the minimal prime $p$ dividing $m$. This means 
$p \nmid n$( because if,  $p \mid n, \ \ \ \ \ p \mid m^n \mid n^m-1 \implies p \mid 1$ which is not true)  \\\\
$p \mid m^n \mid n^m-1  \implies n^m \equiv 1 \pmod{p}$ , We know that $n^{p-1} \equiv 1 \pmod{p}$\\
Thus, $n^{(p-1,m)}= n^1 \equiv 1 \pmod p$, This means $p \mid n-1$.\\\\
\textbf{- Case 1:  If $p$ is odd.} \\

For $m^n \mid n^m-1$, we must have that $$nv_p(m)=v_p(m^n) \leq v_p(n^m-1)= v_p(n-1)+v_p(m)$$. since $p \mid n-1$ \\\\ Here we have used the 
lifting the exponent lemma \\ Now, 
$$nv_p(m) \leq v_p(n-1)+v_p(m) \implies (n-1)v_p(m) \leq v_p(n-1)$$ since,  $p \mid m$, we also have that \\
$n-1 \leq (n-1)v_p(m) \leq v_p(n-1)$. This means $p^{n-1} \mid n-1$.\\  Since $n-1 \neq 0$, we have that \\\\
$2^{n-1} \leq p^{n-1} \leq n-1$ because $p$ is an odd prime. \\
But we know that for all positive integers $n>1 $, \\
$2^{n-1} >n-1$. This is a contradiction! \\
\textbf{- Case 2: If $p=2$} \\
Again, for the same reason and using LTE, \\\\
$nv_2(m) = v_2(m^n) \leq v_2(n-1)+v_2(n+1)+v_2(m)-1  \iff (n-1)v_2(m ) +1 \leq  v_2(n-1)+v_2(n+1)$\\\\
since, $p=2 \mid n-1 \implies 2 \mid n-1+2=n+1$. Thus, $v_2(n-1), v_2(n+1) \geq 1 $. Note that both $v_2(n-1), v_2(n+1)$ cannot be $\geq 2$, since if $v_2(n-1), v_2(n+1) \geq 2 $. This would imply 
$4 \mid (n+1)-(n-1)=2$ which is a contradiction. Thus at least one $v_2(n-1), v_2(n+1)=1$ so we would have that either: \\
$(n-1) \leq (n-1)v_2(m )  \leq v_2(n-1)$ or $(n-1) \leq (n-1)v_2(m )  \leq v_2(n+1)$ This means, \\
We have either : 
$2^{n-1} \mid n-1$ or $2^{n-1} \mid n+1$ \\ since $n \geq 2$, \\
We have either : 
$2^{n-1}  \leq n-1 $ or $2^{n-1} \leq n+1$, In both cases we have, $2^{n-1} \leq n+1$, 
This is true for only $n=1,2,3$ we prove this as follows: \\
If $n \geq 4$ we will prove that $2^{n-1} \leq n+1$ using induction, we can check $n=4$ manually. \\
Now, $2^{n-1}> n+1 \implies 2^{n+1-1}> 2(n+1) = 2n+2 >n+2 = (n+1)+1$ so we have completed our induction. \\

Hence, we can establish that $n=1,2,3$. Since $n>1, p=2 \mid n-1 $, \textbf{we have $n=3$ as the only possibility.} \\  Hence , we have that $$m^3  \mid 3^m-1 \implies 3v_2(m)= v_2(m^3) \leq v_2(3^m-1) =v_2(3-1)+v_2(3+1)+v_2(m)-1=2+v_2(m) $$$$\implies v_2(m) \leq 1 \text{and since 2} \mid m \ \   \text{we have that} \ \boxed{ v_2(m) =1}$$ \\\textbf{ Further I claim that $2$ is the only prime dividing $m$(which establishes that $m=2$ with proof as follows:} \\\\
For the sake of contradiction, assume not. Let $m=2u$ where $u>1$ is odd. Consider the least prime $q>2$ which divides $u$ Since $n=3$, clearly $q \neq 3$ be cause $3|m \implies 3|m^3 \mid 3^m-1$. Let $m=2^uk$
$$q| (2u)^3 \mid 3^{2u} -1 \implies 3^{2u} \equiv 1 \pmod q, 3^{q-1} \equiv 1 \pmod q \implies 3^{(2u, q-1)}= 3^{(2,q-1)} \equiv 3^2 \equiv 1 \pmod q$$. \\
Thus, $q \mid 8 \implies q=2$ but this is a contradiction! Hence we have $m=2$\\

So we get the pair $(m,n)=(2,3)$\\\\

Verifying all these solutions, we get the solution set is the one we claimed as desired. $\square$
\\

\newpage
\begin{problem*}[10]
Let $n$ be an odd positive integer which is not of the form $3^k$ for $k \geq 0$.  
Prove that there exists a set of integers $S$ such that $|s| < \frac{n}{2}$ for all $s \in S$ and the product  
\[
\prod_{s \in S} \frac{(n+s)}{ |s|}
\]
is of the form $3^\ell$ for some $\ell \geq 0$.
    
\end{problem*}
\paragraph{Solution:}. \\
$\blacksquare$ We shall first prove the problem statement for all odd integers, not divisible by  3, $>1$.\\
\\
$\bullet$ $n \equiv 1 \pmod 3$, then we have that $n=3k+1$, since $n$ is odd,  $n-1$ is even, which means $3k$ is even which means $k$ is even, let $k=2m$. \\
So $n=6m+1$, for\textbf{ some positive integer} $m$, since $n>1$\\
Here we claim the set $S= \{-1,2,-4,5, \cdots -(3m-2),3m-1\}$ works well (Here all numbers $s$ such that $s \equiv 2 \pmod 3 $, $|s| < \frac{n}{2}$ are there), \\
We prove it as follows: 
$$\prod_{s \in S} \frac{n+s}{|s|} = \frac{6m}{1}.\frac{6m+3}{2}.\frac{6m-3}{4} \cdots \frac{3m+3}{3m-2}. \frac{9m}{3m-1}= \frac{3^{2m} \frac{(3m)!}{(m)!}}{\frac{(3m-1)!}{3^{m-1}(m-1)!}}= 3^{3m}$$ as desired.\\ 
$\bullet$ $n \equiv 2 \pmod 3$, then we have that $n=3k+2$, since $n$ is odd,  $n-2$ is odd, which means $3k$ is odd which means $k$ is odd, let $k=2m+1$.\\
So $n=6m+5$, for\textbf{ some non -negative integer} $m$, since $n>1$\\
Here we claim the set $S= \{1,-2,4,-5, \cdots (3m+1),-(3m+2)\}$ works well (Here all numbers $s$ such that $s \equiv 1 \pmod 3 $, $|s| < \frac{n}{2}$ are there), \\
We prove it as follows: 
$$\prod_{s \in S} \frac{n+s}{|s|} = \frac{6m+6}{1}.\frac{6m+3}{2}.\frac{6m+9}{4} \cdots \frac{9m+6}{3m+1}. \frac{3m+3}{3m+2}= \frac{3^{2m+2} \frac{(3m+2)!}{(m)!}}{\frac{(3m+2)!}{3^{m}(m)!}}= 3^{3m+2}$$ as desired. \\
$\blacksquare$ Now it remains to prove the problem statement for all odd numbers not of the form $3^l$ but divisible by $3$. Let $n$ be such a number, $n=3^k.u$, where $u$ is a number not divisible by 3.  $u>1,k>0$. \\
We have proven the existence of such a set for $u$ already, let the set be $S_u= \{a_1,a_2 \cdots a_i\}$, then we claim the set $S= 3^kS_u= \{ 3^ka_1, 3^ka_2, \cdots 3^ka_i\}$ works well for $n$, we prove it as follows:\\
$\bullet$ Since $S_u$ is a set , $S=3^kS_u$ is also a set. \\
$\bullet$ Consider  any $s \in S$, $s=3^k.a $, where $a \in S_u$. \\ Since, we have that $ |a| <\frac{u}{2}$, We also have that $$|s|=|3^k.a|=3^k|a| < 3^k\frac u2= \frac n2 $$.Hence each element $s$ of $S$ satisfies the bounds of the the problem statement.\\
$\bullet$ Finally, $$\prod_{s \in S} \frac{n+s}{|s|}= \prod_{a \in S_u} 3^k \frac{u+a}{|a|}= 3^k\prod_{a \in S_u} \frac{u+a}{|a|}= 3^k. 3^{\ell}=3^{k+l}$$, where $\ell$ is a non-negative integer. \\
Hence, we are done. OG!
\end{document}


